<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Copilot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='3d_styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div id="background-scene"></div>
    <header class="bg-primary text-white p-3 mb-4">
        <div class="container">
            <h1 class="display-4">Welcome to Campus Copilot</h1>
            <nav class="navbar navbar-expand-lg navbar-light bg-light rounded">
                <a class="navbar-brand" href="/dashboard">Campus Copilot</a>
                <div class="navbar-nav">
                    <a class="nav-item nav-link" href="/dashboard">Dashboard</a>
                    <a class="nav-item nav-link" href="/add_event">Add Event</a>
                    <a class="nav-item nav-link" href="/notice_board">Notice Board</a>
                    <a class="nav-item nav-link" href="/settings">Settings</a>
                </div>
            </nav>
        </div>
    </header>
    <main class="container">
        <div class="row">
            <div class="col-md-8 mb-4">
                <div class="card">
                    <div class="card-header bg-info text-white">Calendar</div>
                    <div class="card-body">
                        <div id="calendar"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-success text-white">What's Next</div>
                    <div class="card-body">
                        <ul id="upcoming-events" class="list-group">
                            <!-- Dynamic upcoming events will be rendered here -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="bg-light text-center py-3 mt-4">
        <p>&copy; 2025 Campus Copilot. All rights reserved.</p>
    </footer>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
    <script src="{{ url_for('static', filename='3d_animations.js') }}"></script>
    <script>
        $(document).ready(function() {
            var events = {{ events|tojson | safe }};
            $('#calendar').fullCalendar({
                events: events,
                eventClick: function(calEvent) {
                    alert(calEvent.title + "\n" + calEvent.description);
                }
            });
            // Render upcoming events
            var upcomingList = $('#upcoming-events');
            if(events.length === 0) {
                upcomingList.append('<li class="list-group-item">No upcoming events.</li>');
            } else {
                events.slice(0,5).forEach(function(ev) {
                    upcomingList.append('<li class="list-group-item">'+ev.title+' - '+ev.start+'</li>');
                });
            }
        });
    </script>
</body>
</html>